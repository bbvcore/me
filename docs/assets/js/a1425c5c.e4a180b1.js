"use strict";(self.webpackChunkmydocs=self.webpackChunkmydocs||[]).push([[2195],{2992:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"OT/Ciberseguridad/ElasticStack/Despliegues/despliegue-hist_db","title":"Despliegue Hist_db","description":"Esta m\xe1quina esta desplegada sobre un OS Gnu/Linux Ubuntu con los servicios de Grafana e InfluxDB (junto Telegraf).","source":"@site/docs/OT/Ciberseguridad/ElasticStack/Despliegues/despliegue-hist_db.md","sourceDirName":"OT/Ciberseguridad/ElasticStack/Despliegues","slug":"/OT/Ciberseguridad/ElasticStack/Despliegues/despliegue-hist_db","permalink":"/me/docs/docs/OT/Ciberseguridad/ElasticStack/Despliegues/despliegue-hist_db","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/OT/Ciberseguridad/ElasticStack/Despliegues/despliegue-hist_db.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Despliegue Hist_db"},"sidebar":"tutorialSidebar","previous":{"title":"Despliegue Defir","permalink":"/me/docs/docs/OT/Ciberseguridad/ElasticStack/Despliegues/despliegue-dfir"},"next":{"title":"Despliegue iiot-broker","permalink":"/me/docs/docs/OT/Ciberseguridad/ElasticStack/Despliegues/despliegue-iiot-broker"}}');var n=i(4848),r=i(8453);const t={sidebar_position:2,title:"Despliegue Hist_db"},d="Despliegue Hist_db",l={},c=[{value:"Grafana",id:"grafana",level:2},{value:"Requisitos previos de instalaci\xf3n",id:"requisitos-previos-de-instalaci\xf3n",level:3},{value:"Clave GPG",id:"clave-gpg",level:3},{value:"A\xf1adir repositorio",id:"a\xf1adir-repositorio",level:4},{value:"Actualizar",id:"actualizar",level:3},{value:"Instalaci\xf3n",id:"instalaci\xf3n",level:3},{value:"Acceso a Grafana",id:"acceso-a-grafana",level:2},{value:"InfluxDb",id:"influxdb",level:2},{value:"Telegraf",id:"telegraf",level:3}];function o(e){const s={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"despliegue-hist_db",children:"Despliegue Hist_db"})}),"\n",(0,n.jsx)(s.p,{children:"Esta m\xe1quina esta desplegada sobre un OS Gnu/Linux Ubuntu con los servicios de Grafana e InfluxDB (junto Telegraf)."}),"\n",(0,n.jsx)(s.h2,{id:"grafana",children:"Grafana"}),"\n",(0,n.jsx)(s.h3,{id:"requisitos-previos-de-instalaci\xf3n",children:"Requisitos previos de instalaci\xf3n"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"sudo apt-get install -y apt-transport-https software-properties-common wget\n"})}),"\n",(0,n.jsx)(s.h3,{id:"clave-gpg",children:"Clave GPG"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"sudo mkdir -p /etc/apt/keyrings/\r\nwget -q -O - https://apt.grafana.com/gpg.key | gpg --dearmor | sudo tee /etc/apt/keyrings/grafana.gpg > /dev/null\n"})}),"\n",(0,n.jsx)(s.h4,{id:"a\xf1adir-repositorio",children:"A\xf1adir repositorio"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:'echo "deb [signed-by=/etc/apt/keyrings/grafana.gpg] https://apt.grafana.com stable main" | sudo tee -a /etc/apt/sources.list.d/grafana.list\n'})}),"\n",(0,n.jsx)(s.h3,{id:"actualizar",children:"Actualizar"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"sudo apt update\n"})}),"\n",(0,n.jsx)(s.h3,{id:"instalaci\xf3n",children:"Instalaci\xf3n"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"sudo apt-get install grafana\n"})}),"\n",(0,n.jsx)(s.h2,{id:"acceso-a-grafana",children:"Acceso a Grafana"}),"\n",(0,n.jsx)(s.p,{children:"Grafana esta accesible desde el navegador web en el puerto 3000, sus credenciales son admin/admin y en el primer acceso pide un cambio de password."}),"\n",(0,n.jsxs)(s.admonition,{type:"tip",children:[(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Acceso como proceso desde un script"}),"\n"]}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"sudo .\\grafana server\n"})}),(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Acceso como servicio"}),"\n"]}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"systemctl enable grafana-server\r\nsystemctl active grafana-server\n"})})]}),"\n",(0,n.jsx)(s.h2,{id:"influxdb",children:"InfluxDb"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"sudo apt install influxdb2\n"})}),"\n",(0,n.jsx)(s.h3,{id:"telegraf",children:"Telegraf"}),"\n",(0,n.jsx)(s.p,{children:"Dentro de telegraf se ha de establecer una configuraci\xf3n para el protocolo MQTT."}),"\n",(0,n.jsx)(s.p,{children:"Se puede configurar de varias formas:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Desde el fichero de configuraci\xf3n"}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"/etc/telegraf/telegraf.conf\r\n``\r\nAccediendo a las secciones **inputs.mqtt_consumer** y **outputs.influxdb_v2** del fichero de configuraci\xf3n donde se ajustar\xe1n valores como: servers, topic, qos en la primera secci\xf3n y en la segunda secci\xf3n se configuran valores como: servers, token, organization y bucket. Como opcional, seg\xfan las necesidades, se puede dejar sin utilizar los valores de las credenciales username/password.\r\n\r\n- Desde la interfaz web de InfluxDB en la secci\xf3n **Load Data**.\n"})})]})}function u(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},8453:(e,s,i)=>{i.d(s,{R:()=>t,x:()=>d});var a=i(6540);const n={},r=a.createContext(n);function t(e){const s=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),a.createElement(r.Provider,{value:s},e.children)}}}]);