"use strict";(self.webpackChunkmydocs=self.webpackChunkmydocs||[]).push([[5633],{1585:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>d,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"OT/IIOT/influxDB","title":"InfluxDB","description":"Y se mostrar\xe1 entonces un men\xfa de instalaci\xf3n donde se podr\xe1 escoger si instalar en un contenedor Docker o s\xed se instala en el sistema operativo.","source":"@site/docs/OT/IIOT/influxDB.md","sourceDirName":"OT/IIOT","slug":"/OT/IIOT/influxDB","permalink":"/me/docs/docs/OT/IIOT/influxDB","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/OT/IIOT/influxDB.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"InfluxDB"},"sidebar":"tutorialSidebar","previous":{"title":"Open PLC","permalink":"/me/docs/docs/OT/open-plc"},"next":{"title":"Telegraf","permalink":"/me/docs/docs/OT/IIOT/telegraf"}}');var o=r(4848),i=r(8453);const d={sidebar_position:1,title:"InfluxDB"},s="InfluxDB",l={},c=[{value:"Instalar Docker",id:"instalar-docker",level:2},{value:"Acceso instalaci\xf3n de InfluxDB3",id:"acceso-instalaci\xf3n-de-influxdb3",level:3},{value:"Con script descargado",id:"con-script-descargado",level:4},{value:"Otras opciones de ejecuci\xf3n con el script",id:"otras-opciones-de-ejecuci\xf3n-con-el-script",level:4},{value:"Sin script",id:"sin-script",level:4},{value:"Con docker-compose",id:"con-docker-compose",level:3},{value:"Modo producci\xf3n",id:"modo-producci\xf3n",level:2},{value:"Modo desarrollo",id:"modo-desarrollo",level:2},{value:"Docker Engine",id:"docker-engine",level:3},{value:"A\xf1adiendo la clave GPG de Docker",id:"a\xf1adiendo-la-clave-gpg-de-docker",level:4},{value:"A\xf1adiendo el repositorio a la lista de fuentes",id:"a\xf1adiendo-el-repositorio-a-la-lista-de-fuentes",level:4},{value:"Realizando la instalaci\xf3n",id:"realizando-la-instalaci\xf3n",level:4},{value:"Comprobando la instalaci\xf3n",id:"comprobando-la-instalaci\xf3n",level:4}];function t(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"influxdb",children:"InfluxDB"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"curl -O https://www.influxdata.com/d/install_influxdb3.sh \\\r\n&& sh install_influxdb3.sh\n"})}),"\n",(0,o.jsx)(n.p,{children:"Y se mostrar\xe1 entonces un men\xfa de instalaci\xf3n donde se podr\xe1 escoger si instalar en un contenedor Docker o s\xed se instala en el sistema operativo."}),"\n",(0,o.jsx)(n.h2,{id:"instalar-docker",children:"Instalar Docker"}),"\n",(0,o.jsx)(n.p,{children:"Para poder instalar InfluxDB dockerizado hace falta evidentemente tener instalado Docker."}),"\n",(0,o.jsx)(n.admonition,{title:"Descargas de Docker",type:"tip",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)("a",{href:"https://docs.docker.com/engine/install/",children:"Docker Engine"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)("a",{href:"https://docs.docker.com/desktop/",children:"Docker Desktop"}),"\n"]}),"\n"]})}),"\n",(0,o.jsx)(n.p,{children:"Docker Engine es el propio motor de Docker, la capacidad de crear y gestionar contenedores, es capaz de llevar a cabo la mayor\xeda de funciones y se ha de ejecutar desde la l\xednea de comandos."}),"\n",(0,o.jsx)(n.p,{children:"Por su parte Docker Desktop, incluye el Docker Engine, pero adem\xe1s posee herramientas adicionales como plugins, interfaz gr\xe1fica, etc... Es gratuito para cierto tipo de usos y para otros posee una versi\xf3n de pago."}),"\n",(0,o.jsx)(n.h3,{id:"acceso-instalaci\xf3n-de-influxdb3",children:"Acceso instalaci\xf3n de InfluxDB3"}),"\n",(0,o.jsx)(n.h4,{id:"con-script-descargado",children:"Con script descargado"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"docker run -it -p 8181:8181 -v ./plugins:/plugins influxdb3-core influxdb3 serve --object-store memory --node-id node0 --plugin-dir /plugins\n"})}),"\n",(0,o.jsx)(n.h4,{id:"otras-opciones-de-ejecuci\xf3n-con-el-script",children:"Otras opciones de ejecuci\xf3n con el script"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Opcion A, una imagen \r\ndocker run -d \\\r\n  --name influxdb3 \\\r\n  -p 8086:8086 \\\r\n  -v influxdb3_data:/var/lib/influxdb3 \\\r\n  influxdb:3-core\r\n\r\n# Opci\xf3n B, otra imagen\r\ndocker run -d \\\r\n  --name influxdb3 \\\r\n  -p 8086:8086 \\\r\n  -v influxdb3_data:/var/lib/influxdb3 \\\r\n  influxdb3-core:latest\n"})}),"\n",(0,o.jsx)(n.h4,{id:"sin-script",children:"Sin script"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker pull influxdb:3-core\r\n\r\n# Para arquitectura de PC de 64 bits\r\ndocker pull \\\r\n--platform linux/amd64 \\\r\ninfluxdb:3-core\r\n\n"})}),"\n",(0,o.jsx)(n.h3,{id:"con-docker-compose",children:"Con docker-compose"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"version: '3.8'\r\nservices:\r\n  influxdb3:\r\n    image: influxdb:3-core\r\n    platform: linux/amd64\r\n    ports:\r\n      - \"8086:8086\"\r\n    volumes:\r\n      - influxdb3_data:/var/lib/influxdb3\r\n    environment:\r\n      - INFLUXD_SQLITE_DIR=/var/lib/influxdb3\r\n\r\nvolumes:\r\n  influxdb3_data:\r\n\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,o.jsx)(n.admonition,{title:"Puertos",type:"tip",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Puerto 8086"}),": ",(0,o.jsx)(n.em,{children:"puerto tradicional para InfluxDB y su API HTTP para la comunicaci\xf3n con clientes como Telegraf."})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Puerto 8181"}),": ",(0,o.jsxs)(n.em,{children:["Es el puerto para desarrollo incorporado en InfluxDB (",(0,o.jsx)(n.strong,{children:"backend IOx"}),")"]})]}),"\n"]}),"\n"]})}),"\n",(0,o.jsx)(n.h2,{id:"modo-producci\xf3n",children:"Modo producci\xf3n"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker run -d \\\r\n  --name influxdb3 \\\r\n  -p 8086:8086 \\\r\n  -v influxdb3_data:/var/lib/influxdb3 \\\r\n  influxdb:3-core\n"})}),"\n",(0,o.jsx)(n.h2,{id:"modo-desarrollo",children:"Modo desarrollo"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"  mkdir -p plugins && \\\r\ndocker run -it \\\r\n  -p 8181:8181 \\\r\n  -v $(pwd)/plugins:/plugins \\\r\n  influxdb3-core \\\r\n  influxdb3 serve --object-store memory --node-id node0 --plugin-dir /plugins\n"})}),"\n",(0,o.jsx)(n.h3,{id:"docker-engine",children:"Docker Engine"}),"\n",(0,o.jsx)(n.h4,{id:"a\xf1adiendo-la-clave-gpg-de-docker",children:"A\xf1adiendo la clave GPG de Docker"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\r\nsudo apt-get install ca-certificates curl\r\nsudo install -m 0755 -d /etc/apt/keyrings\r\nsudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc\r\nsudo chmod a+r /etc/apt/keyrings/docker.asc\n"})}),"\n",(0,o.jsx)(n.h4,{id:"a\xf1adiendo-el-repositorio-a-la-lista-de-fuentes",children:"A\xf1adiendo el repositorio a la lista de fuentes"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'echo \\\r\n  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\\r\n  $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \\\r\n  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\r\nsudo apt-get update\n'})}),"\n",(0,o.jsx)(n.h4,{id:"realizando-la-instalaci\xf3n",children:"Realizando la instalaci\xf3n"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Realizando la instalaci\xf3n\r\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n"})}),"\n",(0,o.jsx)(n.h4,{id:"comprobando-la-instalaci\xf3n",children:"Comprobando la instalaci\xf3n"}),"\n",(0,o.jsx)(n.p,{children:'Para ver que todo ha salido perfectamente hay una comprobaci\xf3n con un contenedor de prueba llamado "Hello World"'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo docker run hello-world\n"})}),"\n",(0,o.jsx)(n.p,{children:"Si sale bien se ver\xe1 un mensaje de texto asociado al contenido de esa imagen de docker ejecutada. Tambi\xe9n se puede consultar la lista de contenedores ejecutados para ver como se hab\xeda ejecutado el contenedor hello-world."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo docker container ps -a\r\nsudo docker image ls\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(t,{...e})}):t(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>s});var a=r(6540);const o={},i=a.createContext(o);function d(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);