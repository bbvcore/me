"use strict";(self.webpackChunkmydocs=self.webpackChunkmydocs||[]).push([[2486],{397:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Servidores/Linux/BIND","title":"Bind","description":"En este documento se realiza la instalaci\xf3n y configuraci\xf3n de 2 servidores DNS (master/slave) en GNU/Linux, concretamente en 2 equipos que ejecutan la distribuci\xf3n Ubuntu Server.","source":"@site/docs/Servidores/Linux/BIND.md","sourceDirName":"Servidores/Linux","slug":"/Servidores/Linux/BIND","permalink":"/me/docs/docs/Servidores/Linux/BIND","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Servidores/Linux/BIND.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"Bind"},"sidebar":"tutorialSidebar","previous":{"title":"Podman","permalink":"/me/docs/docs/Servicios/Contenerizacion/Podman/"},"next":{"title":"OPNsense","permalink":"/me/docs/docs/Servidores/Linux/OPNsense"}}');var r=a(4848),i=a(8453);const o={sidebar_position:10,title:"Bind"},l="BIND",d={},c=[{value:"Instalaci\xf3n",id:"instalaci\xf3n",level:2},{value:"Servidor master",id:"servidor-master",level:2},{value:"Contenido named.conf.local",id:"contenido-namedconflocal",level:3},{value:"Contenido de db.bbvnet.local",id:"contenido-de-dbbbvnetlocal",level:3},{value:"Contenido de db.192.168.1",id:"contenido-de-db1921681",level:3},{value:"Servidor slave",id:"servidor-slave",level:2},{value:"Consultas externas",id:"consultas-externas",level:2}];function t(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"bind",children:"BIND"})}),"\n",(0,r.jsx)(n.p,{children:"En este documento se realiza la instalaci\xf3n y configuraci\xf3n de 2 servidores DNS (master/slave) en GNU/Linux, concretamente en 2 equipos que ejecutan la distribuci\xf3n Ubuntu Server."}),"\n",(0,r.jsx)(n.h2,{id:"instalaci\xf3n",children:"Instalaci\xf3n"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt upgrade\nsudo apt install bind9\n"})}),"\n",(0,r.jsx)(n.h2,{id:"servidor-master",children:"Servidor master"}),"\n",(0,r.jsxs)(n.p,{children:["En el fichero ",(0,r.jsx)(n.strong,{children:"named.conf.local"})," se van a crear las zonas del servidor, en este caso del principal que va a actuar como ",(0,r.jsx)(n.strong,{children:"master"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Adem\xe1s de la zona principal, tambi\xe9n se creara la zona para la resoluci\xf3n de inversa, cubriendo as\xed todo tipo de consultas a servidores, tanto por el nombre de dominio como por la direcci\xf3n IP"}),"\n",(0,r.jsx)(n.h3,{id:"contenido-namedconflocal",children:"Contenido named.conf.local"}),"\n",(0,r.jsx)(n.admonition,{title:"IPs",type:"warning",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["La ",(0,r.jsx)(n.strong,{children:"IP"})," del ",(0,r.jsx)(n.strong,{children:"master"})," en este caso es: ",(0,r.jsx)(n.strong,{children:"192.168.1.100"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["La ",(0,r.jsx)(n.strong,{children:"IP"})," del ",(0,r.jsx)(n.strong,{children:"slave"})," en este caso es: ",(0,r.jsx)(n.strong,{children:"192.168.1.101"}),"."]}),"\n"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'zone "bbvnet.local" {\n    type master;\n    file "/etc/bind/zones/db.bbvnet.local";\n    allow-transfer { 192.168.1.101; };\n};\n\nzone "1.168.192.in-addr.arpa" {\n    type master;\n    file "/etc/bind/zones/db.192.168.1";\n    allow-transfer { 192.168.1.101; };\n};\n'})}),"\n",(0,r.jsx)(n.p,{children:"En este fichero se establece el nombre de la zona, con el nombre de dominio local y con la resoluci\xf3n de inversa."}),"\n",(0,r.jsxs)(n.p,{children:["Adem\xe1s se especifica la ubicaci\xf3n de los ficheros de configuraci\xf3n de estas zonas, que es donde se establecer\xe1n las caracter\xedsticas de la ",(0,r.jsx)(n.strong,{children:"zona de autoridad"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"contenido-de-dbbbvnetlocal",children:"Contenido de db.bbvnet.local"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$TTL 86400\n\nbbvnet.local.         IN    SOA     ns1.bbvnet.local. admin.bbvnet.local. (\n                      2025051201 ; Serial\n                      3600       ; Refresh\n                      1800       ; Retry\n                      604800     ; Expire\n                      86400 )    ; Negative Cache TTL\n\nbbvnet.local.         IN    NS      ns1.bbvnet.local.\nbbvnet.local.         IN    NS      ns2.bbvnet.local.\n\nns1.bbvnet.local.     IN    A       192.168.1.100\nns2.bbvnet.local.     IN    A       192.168.1.101\n"})}),"\n",(0,r.jsx)(n.h3,{id:"contenido-de-db1921681",children:"Contenido de db.192.168.1"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$TTL 86400\n\n1.168.192.in-addr.arpa.     IN    SOA     ns1.bbvnet.local. admin.bbvnet.local. (\n                          2025051201 ; Serial\n                          3600       ; Refresh\n                          1800       ; Retry\n                          604800     ; Expire\n                          86400 )    ; Negative Cache TTL\n\n1.168.192.in-addr.arpa.     IN    NS      ns1.bbvnet.local.\n1.168.192.in-addr.arpa.     IN    NS      ns2.bbvnet.local.\n\n100.1.168.192.in-addr.arpa.   IN    PTR     ns1.bbvnet.local.\n101.1.168.192.in-addr.arpa.   IN    PTR     ns2.bbvnet.local.\n"})}),"\n",(0,r.jsx)(n.h2,{id:"servidor-slave",children:"Servidor slave"}),"\n",(0,r.jsxs)(n.p,{children:["Los ficheros de ambas zonas, tanto el de la directa como el de la inversa ya est\xe1n en el maestro, estos fichero se replicar\xe1n en el ",(0,r.jsx)(n.strong,{children:"slave"})," en el directorio ",(0,r.jsx)(n.strong,{children:"/var/cache/bind"}),", esa ruta puede variar si se edita en el fichero ",(0,r.jsx)(n.strong,{children:"named.conf.options"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'zone "bbvnet.local" {\n    type slave;\n    file "/var/cache/bind/db.bbvnet.local";\n    masters { 192.168.1.100; };\n};\n\nzone "1.168.192.in-addr.arpa" {\n    type slave;\n    file "/var/cache/bind/db.192.168.1";\n    masters { 192.168.1.100; };\n};\n\n\n'})}),"\n",(0,r.jsx)(n.h2,{id:"consultas-externas",children:"Consultas externas"}),"\n",(0,r.jsx)(n.p,{children:"Las consultas externas, fuera de la zona de autoridad creada para las resoluciones DNS internas, se configuran en el siguiente fichero."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo nano named.conf.options\n"})}),"\n",(0,r.jsx)(n.p,{children:"Y all\xed en el apartado de forwarders se especifican los servidores DNS para tal fin."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'// Fichero para la replicaci\xf3n\ndirectory "/var/cache/bind";\n\n// Permitir recursividad\nrecursion yes;\n\n// Redes permitidas para consultas\nallow-query { any; };\n\n// DNS externos\nforwarders {\n    8.8.8.8;        \n    8.8.4.4;       \n    1.1.1.1;       \n};\n'})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>l});var s=a(6540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);